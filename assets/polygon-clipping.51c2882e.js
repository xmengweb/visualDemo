import{T as V}from"./splaytree.2d057cbd.js";function w(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}function D(u,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(u,r.key,r)}}function m(u,t,e){return t&&D(u.prototype,t),e&&D(u,e),u}var C=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},X=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,s=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:r,y:i},ur:{x:n,y:s}}},k=Number.EPSILON;k===void 0&&(k=Math.pow(2,-52));var re=k*k,F=function(t,e){if(-k<t&&t<k&&-k<e&&e<k)return 0;var r=t-e;return r*r<re*t*e?0:t<e?-1:1},te=function(){function u(){w(this,u),this.reset()}return m(u,[{key:"reset",value:function(){this.xRounder=new Q,this.yRounder=new Q}},{key:"round",value:function(e,r){return{x:this.xRounder.round(e),y:this.yRounder.round(r)}}}]),u}(),Q=function(){function u(){w(this,u),this.tree=new V,this.round(0)}return m(u,[{key:"round",value:function(e){var r=this.tree.add(e),n=this.tree.prev(r);if(n!==null&&F(r.key,n.key)===0)return this.tree.remove(e),n.key;var i=this.tree.next(r);return i!==null&&F(r.key,i.key)===0?(this.tree.remove(e),i.key):e}}]),u}(),z=new te,M=function(t,e){return t.x*e.y-t.y*e.x},ee=function(t,e){return t.x*e.x+t.y*e.y},$=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y},s=M(n,i);return F(s,0)},Y=function(t){return Math.sqrt(ee(t,t))},ne=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return M(i,n)/Y(i)/Y(n)},ie=function(t,e,r){var n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return ee(i,n)/Y(i)/Y(n)},W=function(t,e,r){return e.y===0?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},Z=function(t,e,r){return e.x===0?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},se=function(t,e,r,n){if(e.x===0)return Z(r,n,t.x);if(n.x===0)return Z(t,e,r.x);if(e.y===0)return W(r,n,t.y);if(n.y===0)return W(t,e,r.y);var i=M(e,n);if(i==0)return null;var s={x:r.x-t.x,y:r.y-t.y},a=M(s,e)/i,o=M(s,n)/i,l=t.x+o*e.x,f=r.x+a*n.x,h=t.y+o*e.y,c=r.y+a*n.y,v=(l+f)/2,g=(h+c)/2;return{x:v,y:g}},R=function(){m(u,null,[{key:"compare",value:function(e,r){var n=u.comparePoints(e.point,r.point);return n!==0?n:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:q.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(e,r){return e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0}}]);function u(t,e){w(this,u),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}return m(u,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var r=e.point.events,n=0,i=r.length;n<i;n++){var s=r[n];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,r=0;r<e;r++){var n=this.point.events[r];if(n.segment.consumedBy===void 0)for(var i=r+1;i<e;i++){var s=this.point.events[i];s.consumedBy===void 0&&n.otherSE.point.events===s.otherSE.point.events&&n.segment.consume(s.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],r=0,n=this.point.events.length;r<n;r++){var i=this.point.events[r];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}},{key:"getLeftmostComparator",value:function(e){var r=this,n=new Map,i=function(a){var o=a.otherSE;n.set(a,{sine:ne(r.point,e.point,o.point),cosine:ie(r.point,e.point,o.point)})};return function(s,a){n.has(s)||i(s),n.has(a)||i(a);var o=n.get(s),l=o.sine,f=o.cosine,h=n.get(a),c=h.sine,v=h.cosine;return l>=0&&c>=0?f<v?1:f>v?-1:0:l<0&&c<0?f<v?-1:f>v?1:0:c<l?-1:c>l?1:0}}}]),u}(),oe=0,q=function(){m(u,null,[{key:"compare",value:function(e,r){var n=e.leftSE.point.x,i=r.leftSE.point.x,s=e.rightSE.point.x,a=r.rightSE.point.x;if(a<n)return 1;if(s<i)return-1;var o=e.leftSE.point.y,l=r.leftSE.point.y,f=e.rightSE.point.y,h=r.rightSE.point.y;if(n<i){if(l<o&&l<f)return 1;if(l>o&&l>f)return-1;var c=e.comparePoint(r.leftSE.point);if(c<0)return 1;if(c>0)return-1;var v=r.comparePoint(e.rightSE.point);return v!==0?v:-1}if(n>i){if(o<l&&o<h)return-1;if(o>l&&o>h)return 1;var g=r.comparePoint(e.leftSE.point);if(g!==0)return g;var y=e.comparePoint(r.rightSE.point);return y<0?1:y>0?-1:1}if(o<l)return-1;if(o>l)return 1;if(s<a){var x=r.comparePoint(e.rightSE.point);if(x!==0)return x}if(s>a){var E=e.comparePoint(r.rightSE.point);if(E<0)return 1;if(E>0)return-1}if(s!==a){var d=f-o,S=s-n,p=h-l,P=a-i;if(d>S&&p<P)return 1;if(d<S&&p>P)return-1}return s>a?1:s<a||f<h?-1:f>h?1:e.id<r.id?-1:e.id>r.id?1:0}}]);function u(t,e,r,n){w(this,u),this.id=++oe,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=r,this.windings=n}return m(u,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<r?e:r},ur:{x:this.rightSE.point.x,y:e>r?e:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var r=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(r.x===n.x)return e.x===r.x?0:e.x<r.x?1:-1;var s=(e.y-r.y)/i.y,a=r.x+s*i.x;if(e.x===a)return 0;var o=(e.x-r.x)/i.x,l=r.y+o*i.y;return e.y===l?0:e.y<l?-1:1}},{key:"getIntersection",value:function(e){var r=this.bbox(),n=e.bbox(),i=X(r,n);if(i===null)return null;var s=this.leftSE.point,a=this.rightSE.point,o=e.leftSE.point,l=e.rightSE.point,f=C(r,o)&&this.comparePoint(o)===0,h=C(n,s)&&e.comparePoint(s)===0,c=C(r,l)&&this.comparePoint(l)===0,v=C(n,a)&&e.comparePoint(a)===0;if(h&&f)return v&&!c?a:!v&&c?l:null;if(h)return c&&s.x===l.x&&s.y===l.y?null:s;if(f)return v&&a.x===o.x&&a.y===o.y?null:o;if(v&&c)return null;if(v)return a;if(c)return l;var g=se(s,this.vector(),o,e.vector());return g===null||!C(i,g)?null:z.round(g.x,g.y)}},{key:"split",value:function(e){var r=[],n=e.events!==void 0,i=new R(e,!0),s=new R(e,!1),a=this.rightSE;this.replaceRightSE(s),r.push(s),r.push(i);var o=new u(i,a,this.rings.slice(),this.windings.slice());return R.comparePoints(o.leftSE.point,o.rightSE.point)>0&&o.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),s.checkForConsuming()),r}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,n=this.windings.length;r<n;r++)this.windings[r]*=-1}},{key:"consume",value:function(e){for(var r=this,n=e;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=u.compare(r,n);if(i!==0){if(i>0){var s=r;r=n,n=s}if(r.prev===n){var a=r;r=n,n=a}for(var o=0,l=n.rings.length;o<l;o++){var f=n.rings[o],h=n.windings[o],c=r.rings.indexOf(f);c===-1?(r.rings.push(f),r.windings.push(h)):r.windings[c]+=h}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,s=0,a=this.rings.length;s<a;s++){var o=this.rings[s],l=this.windings[s],f=r.indexOf(o);f===-1?(r.push(o),n.push(l)):n[f]+=l}for(var h=[],c=[],v=0,g=r.length;v<g;v++)if(n[v]!==0){var y=r[v],x=y.poly;if(c.indexOf(x)===-1)if(y.isExterior)h.push(x);else{c.indexOf(x)===-1&&c.push(x);var E=h.indexOf(y.poly);E!==-1&&h.splice(E,1)}}for(var d=0,S=h.length;d<S;d++){var p=h[d].multiPoly;i.indexOf(p)===-1&&i.push(p)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var e=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(I.type){case"union":{var n=e.length===0,i=r.length===0;this._isInResult=n!==i;break}case"intersection":{var s,a;e.length<r.length?(s=e.length,a=r.length):(s=r.length,a=e.length),this._isInResult=a===I.numMultiPolys&&s<a;break}case"xor":{var o=Math.abs(e.length-r.length);this._isInResult=o%2===1;break}case"difference":{var l=function(h){return h.length===1&&h[0].isSubject};this._isInResult=l(e)!==l(r);break}default:throw new Error("Unrecognized operation type found ".concat(I.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,n){var i,s,a,o=R.comparePoints(e,r);if(o<0)i=e,s=r,a=1;else if(o>0)i=r,s=e,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));var l=new R(i,!0),f=new R(s,!1);return new u(l,f,[n],[a])}}]),u}(),H=function(){function u(t,e,r){if(w(this,u),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var n=z.round(t[0][0],t[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};for(var i=n,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=z.round(t[s][0],t[s][1]);o.x===i.x&&o.y===i.y||(this.segments.push(q.fromRing(i,o,this)),o.x<this.bbox.ll.x&&(this.bbox.ll.x=o.x),o.y<this.bbox.ll.y&&(this.bbox.ll.y=o.y),o.x>this.bbox.ur.x&&(this.bbox.ur.x=o.x),o.y>this.bbox.ur.y&&(this.bbox.ur.y=o.y),i=o)}(n.x!==i.x||n.y!==i.y)&&this.segments.push(q.fromRing(i,n,this))}return m(u,[{key:"getSweepEvents",value:function(){for(var e=[],r=0,n=this.segments.length;r<n;r++){var i=this.segments[r];e.push(i.leftSE),e.push(i.rightSE)}return e}}]),u}(),ue=function(){function u(t,e){if(w(this,u),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new H(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,n=t.length;r<n;r++){var i=new H(t[r],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}return m(u,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),r=0,n=this.interiorRings.length;r<n;r++)for(var i=this.interiorRings[r].getSweepEvents(),s=0,a=i.length;s<a;s++)e.push(i[s]);return e}}]),u}(),J=function(){function u(t,e){if(w(this,u),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,n=t.length;r<n;r++){var i=new ue(t[r],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}return m(u,[{key:"getSweepEvents",value:function(){for(var e=[],r=0,n=this.polys.length;r<n;r++)for(var i=this.polys[r].getSweepEvents(),s=0,a=i.length;s<a;s++)e.push(i[s]);return e}}]),u}(),ae=function(){m(u,null,[{key:"factory",value:function(e){for(var r=[],n=0,i=e.length;n<i;n++){var s=e[n];if(!(!s.isInResult()||s.ringOut)){for(var a=null,o=s.leftSE,l=s.rightSE,f=[o],h=o.point,c=[];a=o,o=l,f.push(o),o.point!==h;)for(;;){var v=o.getAvailableLinkedEvents();if(v.length===0){var g=f[0].point,y=f[f.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(g.x,",")+" ".concat(g.y,"]. Last matching segment found ends at")+" [".concat(y.x,", ").concat(y.y,"]."))}if(v.length===1){l=v[0].otherSE;break}for(var x=null,E=0,d=c.length;E<d;E++)if(c[E].point===o.point){x=E;break}if(x!==null){var S=c.splice(x)[0],p=f.splice(S.index);p.unshift(p[0].otherSE),r.push(new u(p.reverse()));continue}c.push({index:f.length,point:o.point});var P=o.getLeftmostComparator(a);l=v.sort(P)[0].otherSE;break}r.push(new u(f))}}return r}}]);function u(t){w(this,u),this.events=t;for(var e=0,r=t.length;e<r;e++)t[e].segment.ringOut=this;this.poly=null}return m(u,[{key:"getGeom",value:function(){for(var e=this.events[0].point,r=[e],n=1,i=this.events.length-1;n<i;n++){var s=this.events[n].point,a=this.events[n+1].point;$(s,e,a)!==0&&(r.push(s),e=s)}if(r.length===1)return null;var o=r[0],l=r[1];$(o,e,l)===0&&r.shift(),r.push(r[0]);for(var f=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:r.length-1,c=this.isExteriorRing()?r.length:-1,v=[],g=h;g!=c;g+=f)v.push([r[g].x,r[g].y]);return v}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],r=1,n=this.events.length;r<n;r++){var i=this.events[r];R.compare(e,i)>0&&(e=i)}for(var s=e.segment.prevInResult(),a=s?s.prevInResult():null;;){if(!s)return null;if(!a)return s.ringOut;if(a.ringOut!==s.ringOut)return a.ringOut.enclosingRing()!==s.ringOut?s.ringOut:s.ringOut.enclosingRing();s=a.prevInResult(),a=s?s.prevInResult():null}}}]),u}(),K=function(){function u(t){w(this,u),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return m(u,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(var r=0,n=this.interiorRings.length;r<n;r++){var i=this.interiorRings[r].getGeom();i!==null&&e.push(i)}return e}}]),u}(),le=function(){function u(t){w(this,u),this.rings=t,this.polys=this._composePolys(t)}return m(u,[{key:"getGeom",value:function(){for(var e=[],r=0,n=this.polys.length;r<n;r++){var i=this.polys[r].getGeom();i!==null&&e.push(i)}return e}},{key:"_composePolys",value:function(e){for(var r=[],n=0,i=e.length;n<i;n++){var s=e[n];if(!s.poly)if(s.isExteriorRing())r.push(new K(s));else{var a=s.enclosingRing();a.poly||r.push(new K(a)),a.poly.addInterior(s)}}return r}}]),u}(),fe=function(){function u(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q.compare;w(this,u),this.queue=t,this.tree=new V(e),this.segments=[]}return m(u,[{key:"process",value:function(e){var r=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(r),n;var i=e.isLeft?this.tree.insert(r):this.tree.find(r);if(!i)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var s=i,a=i,o=void 0,l=void 0;o===void 0;)s=this.tree.prev(s),s===null?o=null:s.key.consumedBy===void 0&&(o=s.key);for(;l===void 0;)a=this.tree.next(a),a===null?l=null:a.key.consumedBy===void 0&&(l=a.key);if(e.isLeft){var f=null;if(o){var h=o.getIntersection(r);if(h!==null&&(r.isAnEndpoint(h)||(f=h),!o.isAnEndpoint(h)))for(var c=this._splitSafely(o,h),v=0,g=c.length;v<g;v++)n.push(c[v])}var y=null;if(l){var x=l.getIntersection(r);if(x!==null&&(r.isAnEndpoint(x)||(y=x),!l.isAnEndpoint(x)))for(var E=this._splitSafely(l,x),d=0,S=E.length;d<S;d++)n.push(E[d])}if(f!==null||y!==null){var p=null;if(f===null)p=y;else if(y===null)p=f;else{var P=R.comparePoints(f,y);p=P<=0?f:y}this.queue.remove(r.rightSE),n.push(r.rightSE);for(var L=r.split(p),O=0,A=L.length;O<A;O++)n.push(L[O])}n.length>0?(this.tree.remove(r),n.push(e)):(this.segments.push(r),r.prev=o)}else{if(o&&l){var b=o.getIntersection(l);if(b!==null){if(!o.isAnEndpoint(b))for(var B=this._splitSafely(o,b),N=0,_=B.length;N<_;N++)n.push(B[N]);if(!l.isAnEndpoint(b))for(var T=this._splitSafely(l,b),G=0,U=T.length;G<U;G++)n.push(T[G])}}this.tree.remove(r)}return n}},{key:"_splitSafely",value:function(e,r){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var i=e.split(r);return i.push(n),e.consumedBy===void 0&&this.tree.insert(e),i}}]),u}(),j=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,he=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ve=function(){function u(){w(this,u)}return m(u,[{key:"run",value:function(e,r,n){I.type=e,z.reset();for(var i=[new J(r,!0)],s=0,a=n.length;s<a;s++)i.push(new J(n[s],!1));if(I.numMultiPolys=i.length,I.type==="difference")for(var o=i[0],l=1;l<i.length;)X(i[l].bbox,o.bbox)!==null?l++:i.splice(l,1);if(I.type==="intersection"){for(var f=0,h=i.length;f<h;f++)for(var c=i[f],v=f+1,g=i.length;v<g;v++)if(X(c.bbox,i[v].bbox)===null)return[]}for(var y=new V(R.compare),x=0,E=i.length;x<E;x++)for(var d=i[x].getSweepEvents(),S=0,p=d.length;S<p;S++)if(y.insert(d[S]),y.size>j)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var P=new fe(y),L=y.size,O=y.pop();O;){var A=O.key;if(y.size===L){var b=A.segment;throw new Error("Unable to pop() ".concat(A.isLeft?"left":"right"," SweepEvent ")+"[".concat(A.point.x,", ").concat(A.point.y,"] from segment #").concat(b.id," ")+"[".concat(b.leftSE.point.x,", ").concat(b.leftSE.point.y,"] -> ")+"[".concat(b.rightSE.point.x,", ").concat(b.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(y.size>j)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(P.segments.length>he)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var B=P.process(A),N=0,_=B.length;N<_;N++){var T=B[N];T.consumedBy===void 0&&y.insert(T)}L=y.size,O=y.pop()}z.reset();var G=ae.factory(P.segments),U=new le(G);return U.getGeom()}}]),u}(),I=new ve,ce=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return I.run("union",t,r)},ye=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return I.run("intersection",t,r)},ge=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return I.run("xor",t,r)},xe=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return I.run("difference",t,r)},Ee={union:ce,intersection:ye,xor:ge,difference:xe};export{Ee as i};
